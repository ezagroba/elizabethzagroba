<!DOCTYPE html>
<html prefix="og: http://ogp.me/ns# article: http://ogp.me/ns/article#
" lang="en">
<head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1">
<title>Update your Mac Terminal to display your current git branch and status | Elizabeth Zagroba: Software Tester</title>
<link href="../../../assets/css/all-nocdn.css" rel="stylesheet" type="text/css">
<meta name="theme-color" content="#5670d4">
<meta name="generator" content="Nikola (getnikola.com)">
<link rel="alternate" type="application/rss+xml" title="RSS" href="../../../rss.xml">
<link rel="canonical" href="https://elizabethzagroba.com/posts/2019/2019-02-02_update-your-mac-terminal-to-display-your-current-git-branch-and-status/">
<link rel="icon" href="../../../images/avatar.png" sizes="128x128">
<!--[if lt IE 9]><script src="../../../assets/js/html5.js"></script><![endif]--><link href="../../assets/fontawesome-5.13.0/css/all.css" rel="stylesheet">
<script>var clicky_site_ids = clicky_site_ids || []; clicky_site_ids.push(101248614);</script><script async src="//static.getclicky.com/js"></script><meta name="author" content="Elizabeth Zagroba">
<link rel="prev" href="../2019-01-25_have-i-tried-enough-weird-stuff/" title="Have I Tried Enough Weird Stuff?" type="text/html">
<link rel="next" href="../2019-02-09_nuture-the-bright-spots-dutch-exploratory-workshop-on-testing-2018/" title="Nurture the Bright Spots: Dutch Exploratory Workshop on Testing 2018" type="text/html">
<meta property="og:site_name" content="Elizabeth Zagroba: Software Tester">
<meta property="og:title" content="Update your Mac Terminal to display your current git branch and status">
<meta property="og:url" content="https://elizabethzagroba.com/posts/2019/2019-02-02_update-your-mac-terminal-to-display-your-current-git-branch-and-status/">
<meta property="og:description" content="TLDR; You can copy all the code from my github.
I spent the better part of a crafting day at the office updating my .bash_profile on my Mac. If I’m in a git repository, with every command prompt, I se">
<meta property="og:type" content="article">
<meta property="article:published_time" content="2019-02-02T00:00:00+01:00">
<meta property="article:tag" content="git">
<meta property="article:tag" content="Mac">
<meta property="article:tag" content="terminal">
<meta name="twitter:card" content="summary">
<meta name="twitter:site" content="@website">
<meta name="twitter:creator" content="@username">
</head>
<body>
<a href="#content" class="sr-only sr-only-focusable">Skip to main content</a>

<!-- Menubar -->

<nav class="navbar navbar-expand-md static-top mb-4
navbar-dark bg-dark
"><div class="container">
<!-- This keeps the margins nice -->
        <a class="navbar-brand" href="https://elizabethzagroba.com/">

            <span id="blog-title">Elizabeth Zagroba: Software Tester</span>
        </a>
        <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#bs-navbar" aria-controls="bs-navbar" aria-expanded="false" aria-label="Toggle navigation">
            <span class="navbar-toggler-icon"></span>
        </button>

        <div class="collapse navbar-collapse" id="bs-navbar">
            <ul class="navbar-nav mr-auto">
<li class="nav-item dropdown">
<a href="#" class="nav-link dropdown-toggle" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">Blog</a>
            <div class="dropdown-menu">
                    <a href="../../../archive.html" class="dropdown-item">Archive</a>
                    <a href="../../../categories/index.html" class="dropdown-item">Tags</a>
            </div>
                </li>
<li class="nav-item">
<a href="../../../pages/work" class="nav-link">Work</a>
                </li>
<li class="nav-item">
<a href="../../../pages/speaking" class="nav-link">Speaking</a>
                </li>
<li class="nav-item">
<a href="../../../pages/resources" class="nav-link">Resources</a>

                
            </li>
</ul>
<!-- DuckDuckGo custom search --><form method="get" id="search" action="https://duckduckgo.com/" class="navbar-form pull-left">
<input type="hidden" name="sites" value="https://elizabethzagroba.com/"><input type="hidden" name="k8" value="#444444"><input type="hidden" name="k9" value="#D51920"><input type="hidden" name="kt" value="h"><input type="text" name="q" maxlength="255" placeholder="Search" class="span2" style="margin-top: 4px;"><input type="submit" value="DuckDuckGo Search" style="visibility: hidden;">
</form>
<!-- End of custom search -->


            <ul class="navbar-nav navbar-right"></ul>
</div>
<!-- /.navbar-collapse -->
    </div>
<!-- /.container -->
</nav><!-- End of Menubar --><div class="container" id="content" role="main">
    <div class="body-content">
        <!--Body content-->
        
        
        
<article class="post-text h-entry hentry postpage" itemscope="itemscope" itemtype="http://schema.org/Article"><header><h1 class="p-name entry-title" itemprop="headline name"><a href="." class="u-url">Update your Mac Terminal to display your current git branch and status</a></h1>

        <div class="metadata">
            <p class="byline author vcard p-author h-card"><span class="byline-name fn p-name" itemprop="author">
                    Elizabeth Zagroba
            </span></p>
            <p class="dateline">
            <a href="." rel="bookmark">
            <time class="published dt-published" datetime="2019-02-02T00:00:00+01:00" itemprop="datePublished" title="02 February 2019">02 February 2019</time></a>
            </p>
            

        </div>
        

    </header><div class="e-content entry-content" itemprop="articleBody text">
    <div>
<p><strong>TLDR; You can copy <a href="https://github.com/ezagroba/bash-profile-branch-and-color/blob/master/export-PS1.gist">all the code from my github</a>.</strong></p>
<p name="0fd7" id="0fd7" class="graf graf--p graf-after--h3">I spent the better part of a crafting day at the office updating my <code class="markup--code markup--p-code">.bash_profile</code> on my Mac. If I’m in a git repository, with every command prompt, I see the branch name and an asterisk if there are un-committed changes. The original prompt for the machine, the repository name, and the branch name each appear in different colors. Here’s what it looks like:</p>

<p><img alt="" src="../../../images/posts/2019/command-prompt.png"></p>
<p name="47d3" id="47d3" class="graf graf--p graf-after--figure">It may look like this one line in my <code class="markup--code markup--p-code">.bash_profile</code> file is where the magic happens, because this is where the colors are set:</p>

<pre class="code literal-block"><span></span><code><span class="nb">export</span> <span class="nv">PS1</span><span class="o">=</span><span class="s2">"\[\033[36m\]\u\[\033[32m\]\w\[\033[33m\]\$(git_branch)\$(parse_git_dirty)\[\033[00m\]</span>$<span class="s2">"</span>
</code></pre>


<p><img alt="" src="../../../images/posts/2019/colors.png"></p>
<p name="c9ba" id="c9ba" class="graf graf--p graf-after--figure">Unfortunately the colors, branch, and status still need to be variously activated and calculated.

</p>
<p>This function calculates if the branch has new changes:</p>


<pre class="code literal-block"><span></span><code><span class="kd">function</span> <span class="nx">parse_git_dirty</span> <span class="p">{</span>
  <span class="p">[[</span> <span class="o">-</span><span class="nx">n</span> <span class="s2">"$(git status -s2&gt; /dev/null)"</span> <span class="p">]]</span> <span class="o">&amp;&amp;</span> <span class="nx">echo</span> <span class="s2">"*"</span>
<span class="p">}</span>
</code></pre>



<p name="b7b9" id="b7b9" class="graf graf--p graf-after--figure">The last thing is fetching the branch name:</p>


<pre class="code literal-block"><span></span><code>git_branch<span class="o">()</span> <span class="o">{</span>
  git branch <span class="m">2</span>&gt; /dev/null <span class="p">|</span> sed -e <span class="s1">'/^[^*]/d'</span> -d <span class="s1">'s/* \(.*\)/ (\1)/'</span>
<span class="o">}</span>
</code></pre>



<p name="5ccd" id="5ccd" class="graf graf--p graf-after--figure">It took a lot of internet searching and help from colleagues to set it up. I had the git status and the branch name going separately, but combining them failed. Typing past the width of the window in the command prompt would send text to overwrite the current line instead of wrapping onto a second. <a href="https://askubuntu.com/questions/24358/how-do-i-get-long-command-lines-to-wrap-to-the-next-line" data-href="https://askubuntu.com/questions/24358/how-do-i-get-long-command-lines-to-wrap-to-the-next-line" class="markup--anchor markup--p-anchor" rel="noopener" target="_blank">This solved that for me</a>. <a href="http://jafrog.com/2013/11/23/colors-in-terminal.html" data-href="http://jafrog.com/2013/11/23/colors-in-terminal.html" class="markup--anchor markup--p-anchor" rel="noopener" target="_blank">There are also other color options</a>. The slashes <code class="markup--code markup--p-code">\</code> help end commands, but it was a lot of trial and error to get them all in the right spots. I was editing my <code class="markup--code markup--p-code">.bash_profile</code> intially in Sublime; any plain-text editor would have worked. I moved to nano in the Terminal when I wanted to see the changes more quickly. I did still have to close all open Terminal sessions before seeing the latest changes.</p>
<p name="fb1a" id="fb1a" class="graf graf--p graf-after--p">This lovely command prompt doesn’t prevent every mistake, but it does help call my attention to the status so I don’t:</p>
<ul class="postList">
<li name="412e" id="412e" class="graf graf--li graf-after--p">open the wrong repository (easy to do when you’re migrating from one to another)</li>
<li name="9c89" id="9c89" class="graf graf--li graf-after--li">try to commit before the changes are saved</li>
<li name="8694" id="8694" class="graf graf--li graf-after--li">commit to master instead of a branch</li>
</ul>
<p name="7824" id="7824" class="graf graf--p graf-after--li graf--trailing">If nothing else, I enjoy a bit of color in an interface that doesn’t have any to start.</p>
<section name="c8d0" class="section section--body section--last"><div class="section-divider"><hr class="section-divider"></div>
<div class="section-content"><div class="section-inner sectionLayout--insetColumn"><p name="6696" id="6696" class="graf graf--p graf--leading graf--trailing"><em class="markup--em markup--p-em">Thanks to Maik Nog for suggesting I share this in a more shareable format. It’s available on </em><a href="https://github.com/ezagroba/bash-profile-branch-and-color/blob/master/export-PS1.gist" data-href="https://github.com/ezagroba/bash-profile-branch-and-color/blob/master/export-PS1.gist" class="markup--anchor markup--p-anchor" rel="noopener" target="_blank"><em class="markup--em markup--p-em">github</em></a><em class="markup--em markup--p-em">.</em></p></div></div></section>


*Originally published on [Medium](https://medium.com/@ezagroba/update-your-mac-terminal-to-display-your-current-git-branch-and-status-471c017436a2).*</div>
    </div>
    <aside class="postpromonav"><nav><ul itemprop="keywords" class="tags">
<li><a class="tag p-category" href="../../../categories/git/" rel="tag">git</a></li>
            <li><a class="tag p-category" href="../../../categories/mac/" rel="tag">Mac</a></li>
            <li><a class="tag p-category" href="../../../categories/terminal/" rel="tag">terminal</a></li>
        </ul>
<ul class="pager hidden-print">
<li class="previous">
                <a href="../2019-01-25_have-i-tried-enough-weird-stuff/" rel="prev" title="Have I Tried Enough Weird Stuff?">Previous post</a>
            </li>
            <li class="next">
                <a href="../2019-02-09_nuture-the-bright-spots-dutch-exploratory-workshop-on-testing-2018/" rel="next" title="Nurture the Bright Spots: Dutch Exploratory Workshop on Testing 2018">Next post</a>
            </li>
        </ul></nav></aside></article><!--End of body content--><footer id="footer"><a href="https://twitter.com/ezagroba" target="_blank"><i class="fab fa-twitter" aria-hidden="true"></i></a>
<a href="https://www.linkedin.com/in/ezagroba/" target="_blank"><i class="fab fa-linkedin" aria-hidden="true"></i></a>
<a href="https://github.com/ezagroba" target="_blank"><i class="fab fa-github" aria-hidden="true"></i></a>
<a href="https://getpocket.com/@9b7TbAd9gtTk0p78b5db22ada1pTgyj954byf8p770kRW3IZ220x4n8ad08qVbd1" target="_blank"><i class="fab fa-get-pocket" aria-hidden="true"></i></a>
<a href="https://www.goodreads.com/user/show/5444309-elizabeth" target="_blank"><i class="fab fa-goodreads"></i></a>
<a href="https://mas.to/@ezagroba" target="_blank"><i class="fab fa-mastodon"></i></a>
© 2020 <a href="mailto:me@elizabethzagroba.com">Elizabeth Zagroba</a>. 
Powered by <a href="https://getnikola.com" rel="nofollow">Nikola</a>.

            
            
        </footer>
</div>
</div>


        <script src="../../../assets/js/all-nocdn.js"></script><script>
    baguetteBox.run('div#content', {
        ignoreClass: 'islink',
        captions: function(element) {
            return element.getElementsByTagName('img')[0].alt;
    }});
    </script>
</body>
</html>
